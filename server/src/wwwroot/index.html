<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Covid-19 Device simulation</title>
    <style>
        html, body, #map {
            display: block;
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <script>
        // Initial values for the Map instance
        const CENTER_LAT = 57.707;
        const CENTER_LNG = 11.933;
        const INITIAL_ZOOM = 17;
        const MAP_TYPE = 'satellite'

        /**
         * This function gets called when the Google Maps API has been loaded
         */
        function initMap() {
            const mapElement = document.getElementById('map');

            // Create a Map instance showing the selected region
            const map = new google.maps.Map(mapElement, {
                center: { lat: CENTER_LAT, lng: CENTER_LNG },
                zoom: INITIAL_ZOOM,
                mapTypeId: MAP_TYPE,
                disableDefaultUI: true
            });

            // Connect to the websocket endpoint
            const wsAddress = `ws://${document.location.host}/ws`;
            const ws = new WebSocket(wsAddress);
            ws.onmessage = evt => {
                console.log(evt.data);
            };
            ws.onopen = evt => {
                ws.send('connect');
            }
        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCngI_6-vhZ0jL8JYsXxuwnFCYkLxTRvUc&callback=initMap"
            async defer></script>
</body>
</html>
